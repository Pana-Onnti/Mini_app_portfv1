{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0"></script>

    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
      
    <script src="{% static 'lib/Highcharts-10.3.2/highcharts.js' %}" ></script>
    <script src="{% static 'lib/Highcharts-10.3.2/modules/exporting.js' %}"></script>
    <script src="{% static 'lib/Highcharts-10.3.2/modules/export-data.js' %}"></script>
    <script src="{% static 'lib/Highcharts-10.3.2/modules/accessibility.js' %}"></script>
</head>
<nav class="navbar navbar-expand  bg-primary tb text-dark" aria-label="Second navbar example">
  <div class="container-fluid">
    <a class="navbar-brand text-dark font-size-xl"  href="#"><strong> <h1>Portfolio Tracker</h1></strong></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample02" aria-controls="navbarsExample02" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarsExample02">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link active text-dark " aria-current="page" href="#"><h5>Home</h5></a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="#"><h5>Link</h5></a>
        </li>
      </ul>
      <form role="search" style="margin-left: 75%;">
        <input class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>
    </div>
  </div>
</nav>

<body class="bg-light">
  <div class="container-fluid bg-ligth"> 
     <!-- TradingView Widget BEGIN -->
      <div class="tradingview-widget-container" >
      <div class="tradingview-widget-container__widget"></div>
    
      <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
      {
      "symbols": [
        {
          "proName": "FOREXCOM:SPXUSD",
          "title": "S&P 500"
        },
        {
          "proName": "FOREXCOM:NSXUSD",
          "title": "US 100"
        },
        {
          "proName": "FX_IDC:EURUSD",
          "title": "EUR/USD"
        },
        {
          "proName": "BITSTAMP:BTCUSD",
          "title": "Bitcoin"
        },
        {
          "proName": "BITSTAMP:ETHUSD",
          "title": "Ethereum"
        }
      ],
      "showSymbolLogo": true,
      "colorTheme": "ligth",
      "isTransparent": false,
      "displayMode": "adaptive",
      "locale": "in"
    }
      </script>
  </div>
<!-- TradingView Widget END -->
</div>
  <div class="container-fluid " style=" background-color: #bee5eb;font-family: Financier; font-size: x-large; border: 1px solid black; padding: 0.3rem ; margin-top: 0.3rem ; margin-bottom: 0.3rem; border: 1px solid black;" >
    <div class="container text-center">
      <div class="row">
        <div class="col-sm-3">
          <h4 style="color:dark">
            <strong>Portfolio</strong> </h4>
        </div>
        <div class="col-sm-9">
          <div class="row">
            <div class="col-8 col-sm-6">
              
              <h4 style="color:dark">
                <strong>  Nicola B </strong>
              </h4>         
             
            </div>
            <div class="col-4 col-sm-6">
              <div class="container text-center">
                <div class="row row-cols-2">
                  <div class="col">    
                    <h4 style="color:dark">
                      <strong>                        Current  Value :
                      </strong>

                    </h1>         
                  </div>
                    <div>
                      <h4 style="color:dark">
                        <strong>                       $ {{price}}
                        </strong>
                      

                      </h4> 
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
<div class="container-fluid bg-ligth">
  <div class="row">
    <div class="col-md-9 col-md-push-3">
      
        

        <figure class="highcharts-figure ">
            <div id="container"></div>
            
        </figure>

        <script type="application/javascript">
                Highcharts.getJSON(
                'https://cdn.jsdelivr.net/gh/highcharts/highcharts@v7.0.0/samples/data/usdeur.json',
                function (data) {

                    Highcharts.chart('container', {
                        chart: {
                            zoomType: 'x'
                        },
                        title: {
                            text: 'Portfolio Value',
                            align: 'left'
                        },
                        subtitle: {
                            text: document.ontouchstart === undefined ?
                                'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in',
                            align: 'left'
                        },
                        xAxis: {
                            type: 'datetime'
                        },
                        yAxis: {
                            title: {
                                text: ''
                            }
                        },
                        legend: {
                            enabled: false
                        },
                        plotOptions: {
                            area: {
                                fillColor: {
                                    linearGradient: {
                                        x1: 0,
                                        y1: 0,
                                        x2: 0,
                                        y2: 1
                                    },
                                    stops: [
                                        [0, Highcharts.getOptions().colors[2]],
                                        [1, Highcharts.color(Highcharts.getOptions().colors[4]).setOpacity(0).get('rgba')]
                                    ]
                                },
                                marker: {
                                    radius: 2 
                                },
                                lineWidth: 1,
                                states: {
                                    hover: {
                                        lineWidth: 1
                                    }
                                },
                                threshold: null
                            }
                        },

                        series: [{
                            type: 'area',
                            name: 'USD to EUR',
                            data: data
                        }]
                    });
                }
          );

        
        </script>

    </div>
       <!-- TradingView Widget BEGIN -->
    <div class="col-md-3 col-md-pull-9">
      <!-- TradingView Widget BEGIN -->
            <div class="tradingview-widget-container">
              <div class="tradingview-widget-container__widget"></div>
              <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-quotes.js" async>
              {
              "width": "100%",
              "height": "100%",
              "symbolsGroups": [
                {
                  "name": "√çndices",
                  "originalName": "Indices",
                  "symbols": [
                    {
                      "name": "FOREXCOM:SPXUSD",
                      "displayName": "S&P 500"
                    },
                    {
                      "name": "FOREXCOM:NSXUSD",
                      "displayName": "US 100"
                    },
                    {
                      "name": "FOREXCOM:DJI",
                      "displayName": "Dow 30"
                    },
                    {
                      "name": "INDEX:NKY",
                      "displayName": "Nikkei 225"
                    },
                    {
                      "name": "INDEX:DEU40",
                      "displayName": "DAX Index"
                    },
                    {
                      "name": "FOREXCOM:UKXGBP",
                      "displayName": "UK 100"
                    }
                  ]
                },
                {
                  "name": "Futuros",
                  "originalName": "Futures",
                  "symbols": [
                    {
                      "name": "CME_MINI:ES1!",
                      "displayName": "S&P 500"
                    },
                    {
                      "name": "CME:6E1!",
                      "displayName": "Euro"
                    },
                    {
                      "name": "COMEX:GC1!",
                      "displayName": "Gold"
                    },
                    {
                      "name": "NYMEX:CL1!",
                      "displayName": "Crude Oil"
                    },
                    {
                      "name": "NYMEX:NG1!",
                      "displayName": "Natural Gas"
                    },
                    {
                      "name": "CBOT:ZC1!",
                      "displayName": "Corn"
                    }
                  ]
                },
                {
                  "name": "Bonos",
                  "originalName": "Bonds",
                  "symbols": [
                    {
                      "name": "CME:GE1!",
                      "displayName": "Eurodollar"
                    },
                    {
                      "name": "CBOT:ZB1!",
                      "displayName": "T-Bond"
                    },
                    {
                      "name": "CBOT:UB1!",
                      "displayName": "Ultra T-Bond"
                    },
                    {
                      "name": "EUREX:FGBL1!",
                      "displayName": "Euro Bund"
                    },
                    {
                      "name": "EUREX:FBTP1!",
                      "displayName": "Euro BTP"
                    },
                    {
                      "name": "EUREX:FGBM1!",
                      "displayName": "Euro BOBL"
                    }
                  ]
                },
                {
                  "name": "Forex",
                  "originalName": "Forex",
                  "symbols": [
                    {
                      "name": "FX:EURUSD",
                      "displayName": "EUR/USD"
                    },
                    {
                      "name": "FX:GBPUSD",
                      "displayName": "GBP/USD"
                    },
                    {
                      "name": "FX:USDJPY",
                      "displayName": "USD/JPY"
                    },
                    {
                      "name": "FX:USDCHF",
                      "displayName": "USD/CHF"
                    },
                    {
                      "name": "FX:AUDUSD",
                      "displayName": "AUD/USD"
                    },
                    {
                      "name": "FX:USDCAD",
                      "displayName": "USD/CAD"
                    }
                  ]
                }
              ],
              "showSymbolLogo": true,
              "colorTheme": "ligth",
              "isTransparent": true,
              "locale": "es"
            }
              </script>
            </div>
            <!-- TradingView Widget END -->
              
      </div>
  </div>

</div>
<div  class="bg-ligth container-fluid " style="border-bottom: 1px solid black;">
  <div class="table-responsive">
  
    <table class="table" >
      <thead>
        <tr class="table-info">
          <th scope="col">Activo</th>
          <th scope="col">Descripcion</th>
          <th scope="col">Precio</th>
          <th scope="col">Cartera</th>
        </tr>
      </thead>
      <tbody {%for activo in activos %}>
        <tr class='Light'>
                <td>{{activo.name}}</td>
                <td>{{activo.description}}
                </td>
                <td>${{activo.price}}
                </td>
                <td>{{activo.cartera}}
                </td>
        </tr>    
      </tbody{%endfor%}>
    </table>
    
  </div>
</div>
<div class="container-fluid bg-ligth width20">
    <div class="row">
      <div class="col-sm-6">
        <div class="modal modal-sheet position-static d-block bg-secondary py-11 bg-light" style="background-color: red;" tabindex="-1" role="dialog" id="modalSheet">
          <div class="modal-dialog" role="document">
            <div class="modal-content rounded-6 shadow">
              <div class="modal-header border-bottom-0">
                <h2 class="modal-title fs-1  display-4" style="font-size: 2rem;">Agregar Activos</h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <form action="/addActivo/" method="POST" class="bg-light " style="margin: 5% 5% 5% 5%">{% csrf_token %}
                <div class="form-group">
                    <input class="form-control form-control-lg" type="text" placeholder="Nombre" aria-label=".form-control-lg example" name='nombre'>
                </div>
                <div class="form-group">
                    <input class="form-control form-control-lg" type="text" placeholder="Descripcion" aria-label=".form-control-lg example" name='descripcion'>
                </div>
                <div class="form-group">
                    <input class="form-control form-control-lg" type="text" placeholder="Precio" aria-label=".form-control-lg example" name='precio'>
                </div>
                <div class="form-group">
                  <input class="form-control form-control-lg" type="text" placeholder="Cartera" aria-label=".form-control-lg example" name='clave'>
              </div>
               
                <div class="form-group">
                    <button type="submit" class="btn btn-success btn-block">ENVIAR</button>
                </div>
            </form>
            </div>
          </div>
        </div>
    </div>
      
      
                  <!-------------------------- END -->

      
      <div class="col-sm-6">
          <div class="modal modal-sheet position-static d-block bg-secondary py-11 bg-light" style="background-color: red;" tabindex="-1" role="dialog" id="modalSheet">
            <div class="modal-dialog" role="document">
              <div class="modal-content rounded-6 shadow">
                <div class="modal-header border-bottom-0">
                  <h2 class="modal-title fs-1  display-4" style="font-size: 2rem;">Distribucion de Activos</h2>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <img  class="img-fluid" src="data:image/png;base64,{{ graphic }}" />

                 
                  
              </div>
            </div>
          </div>   
    </div>
</div>
<div class="container-fluid" style="border: 1px solid black;">
  <div class="row"  style=" text-align: center;  background-color: #bee5eb;">
    <div class="col-sm-6" style="margin-top: 1rem ;margin-bottom: 1rem;">
      <h4>Activos en cartera</h4>
    </div>
    <div class="col-sm-6" style="margin-top: 1rem ;margin-bottom: 1rem;">
      <h4>Forex Map</h4>
    </div>
</div>   
<div class="container-fluid"  style='background-color: #d7f2f6;'>
  <div class="row">
    <div class="col-sm-6"{%for activo in activos %} >

        <!-- TradingView Widget BEGIN -->
              <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-info.js" async>
                    {
                    "symbol": "NYSE:{{activo.name}}",
                    "width": "100%",
                    "locale": "en",
                    "colorTheme": "light",
                    "isTransparent": false
                    }
                    </script>
      </div {%endfor%}>
    </div>  
    <div class="col-sm-6">
                <!-- TradingView Widget BEGIN -->
                <div class="tradingview-widget-container">
                  <div class="tradingview-widget-container__widget"></div>
                  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-forex-cross-rates.js" async>
                  {
                  "width": "100%",
                  "height": "100%",
                  "currencies": [
                    "EUR",
                    "USD",
                    "JPY",
                    "GBP",
                    "CHF",
                    "AUD",
                    "CAD",
                    "NZD"
                  ],
                  "isTransparent": false,
                  "colorTheme": "light",
                  "locale": "en"
                }
                  </script>
                </div>
<!-- TradingView Widget END -->      
    </div>
  </div>
</div>

</body>


</html>

